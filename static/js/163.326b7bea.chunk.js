(self.webpackChunkludex_join_solana=self.webpackChunkludex_join_solana||[]).push([[163],{34716:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(798));t.default=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const t=e.protocol||"http",r=e.port||("https"===t?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:r,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,t){try{return await this.request().get(e,t)}catch(r){if(r.response&&r.response.status)return r.response;throw r}}async post(e,t,r){try{return await this.request().post(e,t,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}request(){const e=a.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use((e=>(this.config.logger(`Requesting: ${e.baseURL}/${e.url}`),e))),e.interceptors.response.use((e=>(this.config.logger(`Response:   ${e.config.url} - ${e.status}`),e)))),e}}},46390:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(54165),i=n(r(30482));t.default=class{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,a.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,t){return this.funder.fund(e,t)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,t){return new i.default(e,this,t)}getSigner(){return this.currencyConfig.getSigner()}}},98289:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkingUploader=void 0;const i=r(26547),s=r(21584),o=r(75121),c=a(r(94328)),u=a(r(31866)),l=r(41795),d=a(r(8669)),h=a(r(42757));class f extends o.EventEmitter{constructor(e,t){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=t,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return i.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,t){return this.runUpload(e,{...t})}async runUpload(e,t){var r,a,o;let f=this.uploadID;const p=void 0===t,g={"x-chunking-version":"2"};let w;if(f){if(w=await this.api.get(`/chunks/${this.currency}/${f}/-1`,{headers:g}),404===w.status)throw new Error("Upload ID not found - your upload has probably expired.");if(c.default.checkAndThrow(w,"Getting upload info"),this.chunkSize!=+w.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+w.data.size}).`)}else w=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:g}),c.default.checkAndThrow(w,"Getting upload token"),this.uploadID=f=w.data.id;const{max:y,min:m}=w.data;if(this.chunkSize<+m||this.chunkSize>+y)throw new Error(`Chunk size out of allowed range: ${m} - ${y}`);let v=0;const b=(e,t,r)=>new Promise((n=>{(0,d.default)((async()=>{await this.api.post(`/chunks/${this.currency}/${f}/${t}`,e,{headers:{"Content-Type":"application/octet-stream",...g},maxBodyLength:1/0,maxContentLength:1/0}).then((a=>{if((null===a||void 0===a?void 0:a.status)>=300){const n={res:a,id:r,offset:t,size:e.length};throw this.emit("chunkError",n),n}this.emit("chunkUpload",{id:r,offset:t,size:e.length,totalUploaded:v+=e.length}),n({o:t,d:a})}))}))})),_=null!==(r=w.data.chunks)&&void 0!==r?r:[],T=new s.PassThrough;let S=n.alloc(0),k=!1,x=!0;T.on("end",(()=>k=!0)),T.on("error",(e=>{throw new Error(`Error processing readable: ${e}`)}));const P=async e=>{for(;!k;){if(S.length>=e)return t=n.from(S.slice(0,e)),S=S.slice(e),t;var t=T.read(e);if(null!==t){if(t.length===e)return t;S=n.concat([S,t])}else await new Promise((e=>setTimeout((e=>e(!0)),0,e)))}for(;S.length>=e;)return t=n.from(S.slice(0,e)),S=S.slice(e),t;return x=!1,S};let E;p||(E=(0,i.createData)("",this.currencyConfig.getSigner(),{...t,anchor:null!==(a=null===t||void 0===t?void 0:t.anchor)&&void 0!==a?a:u.default.randomBytes(32).toString("base64").slice(0,32)}),T.write(E.getRaw()),v-=E.getRaw().length),n.isBuffer(e)?(T.write(e),T.end()):e.pipe(T);let C,I,A,B=0,M=[],$=0;if(!p){I=new s.PassThrough;const e=E.getRaw().length;C=await P(this.chunkSize),$++,B+=C.length,I.write(C.slice(e));const t=[(0,l.stringToBuffer)("dataitem"),(0,l.stringToBuffer)("1"),(0,l.stringToBuffer)(E.signatureType.toString()),E.rawOwner,E.rawTarget,E.rawAnchor,E.rawTags,new h.default(I)];A=(0,i.deepHash)(t)}let U=_.pop();for(;x;){if(this.paused&&await new Promise((e=>this.on("resume",(()=>e(void 0))))),U){if(+U[0]-B<=this.chunkSize){const e=U[1],t=await P(e);p||I.write(t),B+=e,U=_.pop(),$++,v+=e;continue}}const e=await P(this.chunkSize);p||I.write(e),M.length==this.batchSize&&(await Promise.all(M),M=[]),M.push(b(e,B,++$)),B+=e.length}if(I&&I.end(),await Promise.all(M),!p){const e=await A,t=n.from(await this.currencyConfig.getSigner().sign(e));C.set(t,2),await b(C,0,0)}const D=await this.api.post(`/chunks/${this.currency}/${f}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...g},timeout:10*this.api.config.timeout});if(402===D.status)throw new Error("Not enough funds to send data");return c.default.checkAndThrow(D,"Finalising upload",[201]),201===D.status&&(D.data={id:null===(o=D.statusText.split(" "))||void 0===o?void 0:o[1]}),this.emit("done",D),D}get completionPromise(){return new Promise((e=>this.on("done",e)))}}t.ChunkingUploader=f},39299:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(8669)),i=n(r(22976)),s=n(r(94328));t.default=class{constructor(e){this.utils=e}async fund(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=new i.default(e);if(!r.isInteger())throw new Error("must use an integer for funding amount");const n=this.utils.currencyConfig,o=await this.utils.getBundlerAddress(this.utils.currency);let c="0";if(n.needsFee){c=(await n.getFee("winston"===n.base[0]?0:r,o)).multipliedBy(t).toFixed(0).toString()}const u=await n.createTx(r,o,c);let l;try{l=await n.sendTx(u.tx)}catch(d){throw d}u.txId||(u.txId=l),s.default.checkAndThrow(l,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(u.txId);if(!await(0,a.default)((async e=>{const t=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:u.txId});return 400==t.status&&e(new Error(`failed to post funding tx - ${u.txId} (keep this id!) - ${t.data}`)),s.default.checkAndThrow(t,`Posting transaction ${u.txId} information to the bundler`,[202]),t}),{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${u.txId} - keep this id!`);return{reward:c,target:o,quantity:r.toString(),id:u.txId}}}},42757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const r=Symbol("not readable"),n=Symbol("readable"),a=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:r,readable:n,ended:a,errored:i};class s{constructor(e){let{size:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=e,this._size=r;const n=["_handleStreamEnd","_handleStreamError"];for(const t of n)Object.defineProperty(this,t,{configurable:!0,writable:!0,value:this[t].bind(this)});e.once("error",this._handleStreamError),e.once("end",this._handleStreamEnd),e.on("readable",(()=>{this._state=t.STATES.readable}))}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let e,t;try{e=this._untilReadable(),t=this._untilEnd(),await Promise.race([e.promise,t.promise])}finally{null!=e&&e.close(),null!=t&&t.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const e=this._size?this._stream.read(this._size):this._stream.read();return null!==e?{done:!1,value:e}:(this._state=t.STATES.notReadable,await new Promise((e=>setTimeout((e=>e(!0)),0,e))),this.next())}}}_untilReadable(){let e;return{close:()=>{null!=e&&this._stream.removeListener("readable",e)},promise:new Promise(((r,n)=>{e=()=>{this._state=t.STATES.readable,this._rejections.delete(n),r()},this._state,t.STATES.readable,this._stream.once("readable",e),this._rejections.add(n)}))}}_untilEnd(){let e;return{close:()=>{null!=e&&this._stream.removeListener("end",e)},promise:new Promise(((r,n)=>{e=()=>{this._state=t.STATES.ended,this._rejections.delete(n),r()},this._stream.once("end",e),this._rejections.add(n)}))}}return(){return this._state=t.STATES.ended,this.next()}throw(e){return this._error=e,this._state=t.STATES.errored,this.next()}close(e){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(e)}_handleStreamError(e){this._error=e,this._state=t.STATES.errored;for(const t of this._rejections)t(e)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s},30482:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(26547),i=n(r(31866));class s extends a.DataItem{constructor(e,t,r){var n;super((0,a.createData)(e,t.currencyConfig.getSigner(),{...r,anchor:null!==(n=null===r||void 0===r?void 0:r.anchor)&&void 0!==n?n:i.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=t,this.signer=t.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}t.default=s},13339:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const i=r(26547),s=a(r(9072)),o=a(r(8669)),c=r(98289);t.sleep=e=>new Promise((t=>setTimeout(t,e)));t.default=class{constructor(e,t,r,n){this.api=e,this.currency=r,this.currencyConfig=n,this.utils=t}async upload(e,t){return await this.chunkedUploader.uploadData(e,t)}get chunkedUploader(){return new c.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let t;const r=i.DataItem.isDataItem(e);if(this.forceUseChunking||r&&e.getRaw().length>5e7||!r){const n=this.chunkedUploader;t=await n.uploadTransaction(r?e.getRaw():e)}else{const{protocol:r,host:n,port:a,timeout:i}=this.api.getConfig();t=await this.api.post(`${r}://${n}:${a}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:i,maxBodyLength:1/0}),201==t.status&&(t.data={id:e.id})}if(402===t.status)throw new Error("Not enough funds to send data");if(t.status>=400)throw new Error(`whilst uploading DataItem: ${t.status} ${t.statusText}`);return t}async concurrentUploader(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const a=[],i=await s.default.for(e).withConcurrency(t>=1?t:5).handleError((async(e,t)=>{if(a.push(e),"Not enough funds to send data"===e.message)throw e})).process((async(e,a,i)=>{await(0,o.default)((async i=>{try{const i=await this.processItem(e);return a%t==0&&await n(`Processed ${a} Items`),r?await r({item:e,res:i,i:a}):{item:e,res:i,i:a}}catch(s){throw"Not enough funds to send data"===s.message&&i(s),s}}),{retries:3,minTimeout:1e3,maxTimeout:1e4})}));return{errors:a,results:i.results}}async processItem(e){return"string"===typeof e&&(e=n.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:t,indexFile:r}=e,n={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(r){if(!t.has(r))throw new Error(`Unable to access item: ${r}`);n.index={path:r}}for(const[a,i]of t.entries())n.paths[a]={id:i};return n}set useChunking(e){"boolean"===typeof e&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}},94328:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const a=n(r(22976));a.default.set({DECIMAL_PLACES:50});t.sleep=e=>new Promise((t=>setTimeout(t,e)));class i{constructor(e,t,r){this.api=e,this.currency=t,this.currencyConfig=r}static checkAndThrow(e,t,r){if((null===e||void 0===e?void 0:e.status)&&!(null!==r&&void 0!==r?r:[]).includes(e.status)&&200!=e.status)throw new Error(`HTTP Error: ${t}: ${e.status} ${"string"!==typeof e.data?e.statusText:e.data}`)}async getNonce(){const e=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(e,"Getting withdrawal nonce"),e.data}async getBalance(e){const t=await this.api.get(`/account/balance/${this.currency}?address=${e}`);return i.checkAndThrow(t,"Getting balance"),new a.default(t.data.balance)}async getBundlerAddress(e){const t=await this.api.get("/info");i.checkAndThrow(t,"Getting Bundler address");const r=t.data.addresses[e];if(!r)throw new Error(`Specified bundler does not support currency ${e}`);return r}async getPrice(e,t){const r=await this.api.get(`/price/${e}/${t}`);return i.checkAndThrow(r,"Getting storage cost"),new a.default(r.data)}async confirmationPoll(e){if(!this.currencyConfig.isSlow){for(let r=0;r<30;r++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(e).then((e=>null===e||void 0===e?void 0:e.confirmed)).catch((e=>!1)))return;console.warn(`Tx ${e} didn't finalize after 30 seconds`)}}unitConverter(e){return new a.default(e).dividedBy(this.currencyConfig.base[1])}}t.default=i},54165:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withdrawBalance=void 0;const i=r(26547),s=r(48865),o=a(r(94328)),c=a(r(22976)),u=a(r(65150));t.withdrawBalance=async function(e,t,r){const a=e.currencyConfig,l={publicKey:await a.getPublicKey(),currency:e.currency,amount:new c.default(r).toString(),nonce:await e.getNonce(),signature:void 0,sigType:a.getSigner().signatureType},d=await(0,i.deepHash)([(0,s.stringToBuffer)(l.currency),(0,s.stringToBuffer)(l.amount.toString()),(0,s.stringToBuffer)(l.nonce.toString())]);n.isBuffer(l.publicKey)||(l.publicKey=n.from(l.publicKey)),l.signature=await a.sign(d);const h=await a.verify(l.publicKey,d,l.signature);l.publicKey=u.default.encode(l.publicKey),l.signature=u.default.encode(l.signature);const f=u.default.toBuffer(l.publicKey),p=u.default.toBuffer(l.signature),g=await(0,i.deepHash)([(0,s.stringToBuffer)(l.currency),(0,s.stringToBuffer)(l.amount.toString()),(0,s.stringToBuffer)(l.nonce.toString())]),w=await a.verify(f,g,p),y=a.ownerToAddress("arweave"==a.name?u.default.decode(l.publicKey):u.default.toBuffer(l.publicKey))===a.address;if(!(h||w||y))throw new Error(`Internal withdrawal validation failed - please report this!\nDebug Info:${JSON.stringify(l)}`);const m=await t.post("/account/withdraw",l);return o.default.checkAndThrow(m,"Withdrawing balance"),m}},87602:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(34716)),i=n(r(46390)),s=n(r(39299)),o=n(r(13339)),c=n(r(94328)),u=n(r(133));class l extends i.default{constructor(e,t,r,n){var i;super();const l=new URL(e);this.api=new a.default({protocol:l.protocol.slice(0,-1),port:l.port,host:l.hostname,timeout:null!==(i=null===n||void 0===n?void 0:n.timeout)&&void 0!==i?i:1e5}),this.currency=t.toLowerCase(),this.currencyConfig=(0,u.default)(t,r,null===n||void 0===n?void 0:n.providerUrl,null===n||void 0===n?void 0:n.contractAddress),this.utils=new c.default(this.api,this.currency,this.currencyConfig),this.uploader=new o.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new s.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}t.default=l},2194:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const a=n(r(22976)),i=r(49739),s=r(62147),o=n(r(48661));class c extends o.default{constructor(e){super(e),this.contractAddress=e.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new i.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(e){const t=await this.providerInstance.getTransaction(e);if(!t)throw new Error("Tx doesn't exist");if(138!==t.data.length||"a9059cbb"!==t.data.slice(2,10))throw new Error("Tx isn't a ERC20 transfer");const r=`0x${t.data.slice(34,74)}`,n=new a.default(t.data.slice(74),16);return{from:t.from,to:r,blockHeight:t.blockNumber?new a.default(t.blockNumber):null,amount:n,pending:!t.blockNumber,confirmed:t.confirmations>=this.minConfirm}}async getFee(e,t){const r="0x"+new a.default(e).toString(16),n=await this.getContract(),i=await this.providerInstance.getGasPrice(),s=await n.estimateGas.transfer(t,r),o=new a.default(i.mul(s).toString()),[c]=await this.getGas(),u=c.multipliedBy(o),l=new a.default(await this.price());return new a.default(u).dividedToIntegerBy(l)}async createTx(e,t,r){const n=await this.getContract(),i="0x"+new a.default(e).toString(16),s=await n.populateTransaction.transfer(t,i);return s.gasPrice=await this.providerInstance.getGasPrice(),s.gasLimit=await n.estimateGas.transfer(t,i),s.chainId=(await this.providerInstance.getNetwork()).chainId,s.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:s}}async getGas(){return[new a.default(await(0,s.getRedstonePrice)("ETH")),1e18]}}t.default=c,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},48661:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(r(29103)),s=r(49739),o=a(r(22976)),c=r(66108),u=a(r(62147)),l=s.ethers.BigNumber,d=c.InjectedEthereumSigner;class h extends u.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const t=this.providerInstance,r=await t.getTransaction(e);if(!r)throw new Error("Tx doesn't exist");return{from:r.from,to:r.to,blockHeight:r.blockNumber?new o.default(r.blockNumber):null,amount:new o.default(r.value.toHexString(),16),pending:!r.blockNumber,confirmed:r.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,i.default)(n.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new c.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,t,r){return d.verify(e,t,r)}async getCurrentHeight(){const e=this.providerInstance,t=await e.send("eth_blockNumber",[]);return new o.default(t,16)}async getFee(e,t){const r=this.providerInstance,n={to:t,from:this.address,value:"0x"+new o.default(e).toString(16)},a=await r.estimateGas(n),i=await r.getGasPrice();return new o.default(a.mul(i).toString())}async sendTx(e){const t=this.w3signer,r=await t.sendTransaction(e);return r?r.hash:void 0}async createTx(e,t,r){const n=l.from(new o.default(e).toFixed()),a=this.w3signer,i=await a.estimateGas({to:t,from:this.address,value:n.toHexString()});let c=await a.getGasPrice();"matic"===this.name&&(c=s.ethers.BigNumber.from(new o.default(c.toString()).multipliedBy(10).decimalPlaces(0).toString()));return{txId:void 0,tx:await a.populateTransaction({to:t,from:this.address,value:n.toHexString(),gasPrice:c,gasLimit:i})}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new s.ethers.providers.JsonRpcProvider(this.providerUrl),await(null===(e=this.providerInstance)||void 0===e?void 0:e._ready())}}t.default=h},133:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(48661)),i=n(r(44476)),s=n(r(30017)),o=n(r(2194)),c=n(r(798)),u=n(r(94328));t.default=function(e,t,r,n){switch(e){case"ethereum":return new a.default({name:"ethereum",ticker:"ETH",providerUrl:null!==r&&void 0!==r?r:"https://cloudflare-eth.com/",wallet:t});case"matic":return new a.default({name:"matic",ticker:"MATIC",providerUrl:null!==r&&void 0!==r?r:"https://polygon-rpc.com",wallet:t,minConfirm:1});case"arbitrum":return new a.default({name:"arbitrum",ticker:"ETH",providerUrl:null!==r&&void 0!==r?r:"https://arb1.arbitrum.io/rpc",wallet:t});case"bnb":return new a.default({name:"bnb",ticker:"BNB",providerUrl:null!==r&&void 0!==r?r:"https://bsc-dataseed.binance.org",wallet:t});case"avalanche":return new a.default({name:"avalanche",ticker:"AVAX",providerUrl:null!==r&&void 0!==r?r:"https://api.avax.network/ext/bc/C/rpc",wallet:t});case"boba-eth":return new a.default({name:"boba-eth",ticker:"ETH",providerUrl:null!==r&&void 0!==r?r:"https://mainnet.boba.network/",minConfirm:1,wallet:t});case"boba":{const e=new o.default({name:"boba",ticker:"BOBA",providerUrl:null!==r&&void 0!==r?r:"https://mainnet.boba.network/",contractAddress:null!==n&&void 0!==n?n:"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:t});return e.price=async()=>{var t;const r=await c.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${e.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await u.default.checkAndThrow(r,"Getting price data"),!(null===(t=null===r||void 0===r?void 0:r.data)||void 0===t?void 0:t.rate))throw new Error(`unable to get price for ${e.name}`);return+r.data.rate},e}case"solana":return new s.default({name:"solana",ticker:"SOL",providerUrl:null!==r&&void 0!==r?r:"https://api.mainnet-beta.solana.com/",wallet:t});case"near":return new i.default({name:"near",ticker:"NEAR",providerUrl:null!==r&&void 0!==r?r:"https://rpc.mainnet.near.org",wallet:t});default:throw new Error(`Unknown/Unsupported currency ${e}`)}}},44476:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(66108),s=a(r(22976)),o=r(92642),c=r(96780),u=a(r(45081)),l=r(83695),d=a(r(62147));class h extends d.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new o.keyStores.BrowserLocalStorageKeyStore,t=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,t.accountId),!this.keyPair){this.keyPair=o.KeyPair.fromRandom("ed25519");const r=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,t.accountId,this.keyPair),await t.addKey(r)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var t;const r=await this.providerInstance,[n,a]=e.split(":"),i=await r.txStatusReceipts((0,c.decode)(a),n),o=await r.block(i.transaction_outcome.block_hash),u=(await r.block({finality:"final"})).header.height;if(""!==i.receipts_outcome[0].outcome.status.SuccessValue)throw new Error("Transaction failed!");const l=null!==(t=i.receipts[0].receipt.Action.actions[0].Transfer.deposit)&&void 0!==t?t:0;return{from:n,to:i.transaction.receiver_id,amount:new s.default(l),blockHeight:new s.default(o.header.height),pending:!1,confirmed:u-o.header.height>=this.minConfirm}}ownerToAddress(e){const t="string"===typeof e?e:(0,c.encode)(e);return(0,c.decode)(t.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new i.NearSigner(this.keyPair.secretKey)}async verify(e,t,r){return i.NearSigner.verify(e,t,r)}async getCurrentHeight(){const e=await this.providerInstance.status();return new s.default(e.sync_info.latest_block_height)}async getFee(e,t){const r=await this.providerInstance.gasPrice(null);return new s.default(r.gas_price).multipliedBy(45e10)}async sendTx(e){const t=await this.providerInstance.sendTransaction(e);return`${this.address}:${t.transaction.hash}`}async createTx(e,t,r){const n=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),a=++n.nonce,i=o.utils.serialize.base_decode(n.block_hash),c=[o.transactions.transfer(new u.default(new s.default(e).toString()))],d=o.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),t,a,c,i),h=o.utils.serialize.serialize(o.transactions.SCHEMA,d),f=new Uint8Array(l.sha256.array(h)),p=this.keyPair.sign(f);return{tx:new o.transactions.SignedTransaction({transaction:d,signature:new o.transactions.Signature({keyType:d.publicKey.keyType,data:p.signature})}),txId:void 0}}async getPublicKey(){return n.from(this.keyPair.getPublicKey().data)}}t.default=h},30017:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(66108),u=o(r(22976)),l=o(r(62147)),d=s(r(99692)),h=o(r(96780)),f=o(r(8669));class p extends l.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new d.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const t=await this.getProvider(),r=await t.getTransaction(e,{commitment:"confirmed"});if(!r)throw new Error("Confirmed tx not found");const n=await t.getSlot("confirmed"),a=new u.default(r.meta.postBalances[1]).minus(new u.default(r.meta.preBalances[1]));return{from:r.transaction.message.accountKeys[0].toBase58(),to:r.transaction.message.accountKeys[1].toBase58(),amount:a,blockHeight:new u.default(r.slot),pending:!1,confirmed:n-r.slot>=1}}ownerToAddress(e){return"string"===typeof e&&(e=n.from(e)),h.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new c.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,t,r){return c.HexInjectedSolanaSigner.verify(e,t,r)}async getCurrentHeight(){return new u.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,t){return new u.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,t,r){const n=new d.PublicKey(await this.getPublicKey()),a=await(0,f.default)((async e=>{var t;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(r){if(null===(t=r.message)||void 0===t?void 0:t.includes("blockhash"))throw r;throw e(r),new Error("Unreachable")}}),{retries:3,minTimeout:1e3}),i=new d.Transaction({recentBlockhash:a,feePayer:n});return i.add(d.SystemProgram.transfer({fromPubkey:n,toPubkey:new d.PublicKey(t),lamports:+new u.default(e).toNumber()})),{tx:i,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}t.default=p},62147:function(e,t,r){"use strict";var n=r(30261).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getRedstonePrice=void 0;const i=a(r(14421)),s=a(r(65150)),o=a(r(798)),c=a(r(94328));async function u(e){const t=await o.default.get(`https://api.redstone.finance/prices?symbol=${e}&provider=redstone&limit=1`);return await c.default.checkAndThrow(t,"Getting price data"),t.data[0].value}t.default=class{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return s.default.encode(n.from(await i.default.crypto.hash(await e.rawSignature())))}async price(){return u(this.ticker)}},t.getRedstonePrice=u},13163:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var a=r(87602);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}});var i=r(87602);Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return n(i).default}})},38339:(e,t,r)=>{"use strict";var n=r(38608).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=a}var o=e.length,c=e.charAt(0),u=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,a=0,i=0;e[r]===c;)a++,r++;for(var s=(e.length-r)*u+1>>>0,l=new Uint8Array(s);e[r];){var d=t[e.charCodeAt(r)];if(255===d)return;for(var h=0,f=s-1;(0!==d||h<i)&&-1!==f;f--,h++)d+=o*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,r++}for(var p=s-i;p!==s&&0===l[p];)p++;var g=n.allocUnsafe(a+(s-p));g.fill(0,0,a);for(var w=a;p!==s;)g[w++]=l[p++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,a=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var u=(s-i)*l+1>>>0,d=new Uint8Array(u);i!==s;){for(var h=t[i],f=0,p=u-1;(0!==h||f<a)&&-1!==p;p--,f++)h+=256*d[p]>>>0,d[p]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");a=f,i++}for(var g=u-a;g!==u&&0===d[g];)g++;for(var w=c.repeat(r);g<u;++g)w+=e.charAt(d[g]);return w},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},96780:(e,t,r)=>{var n=r(38339);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}}]);
//# sourceMappingURL=163.326b7bea.chunk.js.map