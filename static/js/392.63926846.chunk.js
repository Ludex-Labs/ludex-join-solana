(self.webpackChunkludex_join_solana=self.webpackChunkludex_join_solana||[]).push([[392],{44879:(t,e,n)=>{"use strict";n.d(e,{v:()=>a});var i=n(46622),r=n(43593),o=n.n(r);class a extends i.J5{async init(t){this.chainConfig||(this.chainConfig=(0,i.h2)(i.EN.SOLANA,1))}async authenticateUser(){if(!this.provider||this.status!==i.MP.CONNECTED)throw i.RM.notConnectedError();const{chainNamespace:t,chainId:e}=this.chainConfig,n=await this.provider.request({method:"getAccounts"});if(n&&n.length>0){const r=(0,i.Cb)(n[0],this.name);if(r){if(!(0,i.$E)(r))return{idToken:r}}const a={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(e,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},s=await(0,i.tV)(a,t),c=(new TextEncoder).encode(s),h=await this.provider.request({method:"signMessage",params:{message:c,display:"utf8"}}),l=await(0,i.rn)(t,o().encode(h),s,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return(0,i.Fr)(n[0],this.name,l),{idToken:l}}throw i.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const t=await this.provider.request({method:"getAccounts"});t&&t.length>0&&(0,i.qz)(t[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(i.n2.DISCONNECTED)}}},1305:(t,e,n)=>{"use strict";var i=n(38608).Buffer;t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var o=t.charAt(r),a=o.charCodeAt(0);if(255!==e[a])throw new TypeError(o+" is ambiguous");e[a]=r}var s=t.length,c=t.charAt(0),h=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return i.alloc(0);for(var n=0,r=0,o=0;t[n]===c;)r++,n++;for(var a=(t.length-n)*h+1>>>0,l=new Uint8Array(a);t[n];){var d=e[t.charCodeAt(n)];if(255===d)return;for(var w=0,u=a-1;(0!==d||w<o)&&-1!==u;u--,w++)d+=s*l[u]>>>0,l[u]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=w,n++}for(var f=a-o;f!==a&&0===l[f];)f++;var v=i.allocUnsafe(r+(a-f));v.fill(0,0,r);for(var p=r;f!==a;)v[p++]=l[f++];return v}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=i.from(e)),!i.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var n=0,r=0,o=0,a=e.length;o!==a&&0===e[o];)o++,n++;for(var h=(a-o)*l+1>>>0,d=new Uint8Array(h);o!==a;){for(var w=e[o],u=0,f=h-1;(0!==w||u<r)&&-1!==f;f--,u++)w+=256*d[f]>>>0,d[f]=w%s>>>0,w=w/s>>>0;if(0!==w)throw new Error("Non-zero carry");r=u,o++}for(var v=h-r;v!==h&&0===d[v];)v++;for(var p=c.repeat(n);v<h;++v)p+=t.charAt(d[v]);return p},decodeUnsafe:d,decode:function(t){var e=d(t);if(e)return e;throw new Error("Non-base"+s+" character")}}}},43593:(t,e,n)=>{var i=n(1305);t.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},76392:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PhantomAdapter:()=>h});var i=n(20240),r=n(46622),o=n(44879),a=n(47703);function s(t,e,n){return new Promise(((i,r)=>{n>0?setTimeout((async()=>{const o=await t();o&&i(o),o||s(t,e,n-1).then((t=>(i(t),t))).catch((t=>r(t)))}),e):i(!1)}))}const c=async function(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3};if("undefined"!==typeof window&&!(null===(t=window.solana)||void 0===t||!t.isPhantom))return window.solana;return await s((()=>{var t;return null===(t=window.solana)||void 0===t?void 0:t.isPhantom}),e.interval,e.count)?window.solana:null};class h extends o.v{constructor(){super(...arguments),(0,i.Z)(this,"name",r.rW.PHANTOM),(0,i.Z)(this,"adapterNamespace",r.yk.SOLANA),(0,i.Z)(this,"currentChainNamespace",r.EN.SOLANA),(0,i.Z)(this,"type",r.hN.EXTERNAL),(0,i.Z)(this,"status",r.MP.NOT_READY),(0,i.Z)(this,"_wallet",null),(0,i.Z)(this,"phantomProvider",null),(0,i.Z)(this,"_onDisconnect",(()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===r.MP.CONNECTED?r.MP.READY:r.MP.NOT_READY,this.emit(r.n2.DISCONNECTED))}))}get isWalletConnected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isConnected||this.status!==r.MP.CONNECTED)}get provider(){var t;return(null===(t=this.phantomProvider)||void 0===t?void 0:t.provider)||null}set provider(t){throw new Error("Not implemented")}async init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(await super.init(t),super.checkInitializationRequirements(),this._wallet=await c({interval:500,count:3}),!this._wallet)throw r.Ty.notInstalled();this.phantomProvider=new a.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=r.MP.READY,this.emit(r.n2.READY,r.rW.PHANTOM);try{r.cM.debug("initializing phantom adapter"),t.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(e){r.cM.error("Failed to connect with cached phantom provider",e),this.emit("ERRORED",e)}}async connect(){var t=this;try{if(super.checkConnectionRequirements(),this.status=r.MP.CONNECTING,this.emit(r.n2.CONNECTING,{adapter:r.rW.PHANTOM}),!this._wallet)throw r.Ty.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{const n=this._wallet._handleDisconnect;try{await new Promise(((e,i)=>{this._wallet?(this._wallet.once("connect",(async()=>{await this.connectWithProvider(this._wallet),e(this.provider)})),this._wallet._handleDisconnect=function(){i(r.Ty.windowClosed());for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n.apply(t._wallet,o)},this._wallet.connect().catch((t=>{i(t)}))):i(r.Ty.notInstalled())}))}catch(e){if(e instanceof r.up)throw e;throw r.RM.connectionError(null===e||void 0===e?void 0:e.message)}finally{this._wallet._handleDisconnect=n}}if(!this._wallet.publicKey)throw r.RM.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(e){throw this.status=r.MP.READY,this.rehydrated=!1,this.emit(r.n2.ERRORED,e),e}}async disconnect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};await super.disconnectSession();try{var e;await(null===(e=this._wallet)||void 0===e?void 0:e.disconnect()),t.cleanup&&(this.status=r.MP.NOT_READY,this.phantomProvider=null,this._wallet=null),await super.disconnect()}catch(n){this.emit(r.n2.ERRORED,r.RM.disconnectionError(null===n||void 0===n?void 0:n.message))}}async getUserInfo(){if(!this.isWalletConnected)throw r.RM.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(t){if(!this.phantomProvider)throw r.RM.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(t),this.status=r.MP.CONNECTED,this.emit(r.n2.CONNECTED,{adapter:r.rW.PHANTOM,reconnected:this.rehydrated}),this.provider}}}}]);
//# sourceMappingURL=392.63926846.chunk.js.map